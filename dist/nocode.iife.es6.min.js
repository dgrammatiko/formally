var FormValidator=function(t){"use strict";const i=()=>{let t=()=>Math.floor(65536*(1+Math.random())).toString(16).substring(1);return t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()},e=()=>{let t=!1;try{const i={get passive(){return t=!0,!0}};window.addEventListener("test",null,i),window.removeEventListener("test",null,i)}catch(i){return t=!1,!1}return t},s=function(t,i){let e;return function(...s){e&&clearTimeout(e),e=setTimeout(()=>{i(...s),e=null},t)}},a={validClass:"is-valid",invalidClass:"is-invalid",indicator:!0,indicatorElement:"div",indicatorPosition:"after",indicatorClass:"invalid-feedback",invalidForm:"Text for invalid form",invalidFormAlert:!1,attachChange:!1,attachInput:!1};class o{constructor(t){if(this.form=t,!t||"HTMLFormElement"!==t.constructor.name)throw new Error("Validator needs a form element");if(!this.form.hasAttribute("novalidate")){if(this.options=a,this.form.dataset)for(const t in this.form.dataset)Object.prototype.hasOwnProperty.call(this.options,t)&&(this.options[t]="indicator"===t||"attachChange"===t||"attachInput"===t||"invalidFormAlert"===t?"true"===this.form.dataset[t]:this.form.dataset[t]);this.passiveSupported=e(),this.elementsForValidation=[],this.formElementValidate=this.formElementValidate.bind(this),this.reAttachElement=this.reAttachElement.bind(this),this.debounced=s(99,this.formElementValidate),this.init(),this.form.Formally=this}}formElementValidate(t){const i=t.target;i.FormallyCustomValidator&&"function"==typeof i.FormallyCustomValidator?i.customValidator():i.checkValidity(),this.notify(i)}getCustomMessage(t,i,e){var s=t.dataset;if("object"==typeof s){if(e.typeMismatch&&s[i+"Mismatch"])return s[i+"Mismatch"];for(var a in s)if(Object.prototype.hasOwnProperty.call(s,a)&&e[a])return s[a]}return""}switchClasses(t,i){i?(t.classList.remove(this.options.invalidClass),t.classList.add(this.options.validClass)):(t.classList.remove(this.options.validClass),t.classList.add(this.options.invalidClass))}formInvalidNotification(){return!0}notify(){return!0}elementInit(){return!0}isValid(){return this.elementsForValidation.forEach(t=>{t.validity.valid?(t.classList.remove(this.options.validClass),t.classList.add(this.options.validClass)):(t.classList.add(this.options.validClass),t.classList.remove(this.options.validClass)),this.notify(t)}),!!this.form.checkValidity()||(this.formInvalidNotification(),!1)}init(){[].slice.call(this.form.elements).forEach(t=>{const i=t.tagName;!i||"INPUT"!==i&&"SELECT"!==i&&"TEXTAREA"!==i||(this.elementsForValidation.push(t),t.addEventListener("blur",this.debounced),this.passiveSupported,"SELECT"===i?t.addEventListener("change",this.debounced,!!this.passiveSupported&&{passive:!0}):t.addEventListener("input",this.debounced,!!this.passiveSupported&&{passive:!0}),this.options.indicator&&this.form.dataset&&0!==Object.keys(this.form.dataset).length&&this.elementInit(t))})}reAttachElement(t){const i=t.tagName;t.removeEventListener("blur",this.debounced,!!this.passiveSupported&&{passive:!0}),t.removeEventListener("change",this.debounced,!!this.passiveSupported&&{passive:!0}),t.removeEventListener("input",this.debounced,!!this.passiveSupported&&{passive:!0}),!i||"INPUT"!==i&&"SELECT"!==i&&"TEXTAREA"!==i||(t.addEventListener("blur",this.debounced,!!this.passiveSupported&&{passive:!0}),"SELECT"===i?t.addEventListener("change",this.debounced,!!this.passiveSupported&&{passive:!0}):t.addEventListener("input",this.debounced,!!this.passiveSupported&&{passive:!0}),this.options.indicator&&this.form.dataset&&0!==Object.keys(this.form.dataset).length&&this.elementInit(t))}}class n extends o{constructor(t){super(t)}elementInit(t){if(t.hasAttribute("disabled"))return;let e=t.closest("span");e||(e=document.createElement(this.options.indicatorElement)),e.setAttribute("aria-live","polite");const s=i();e.id=s,t.setAttribute("aria-controls",s),e.classList.add(this.options.indicatorClass),"after"===this.options.indicatorPosition?(t.insertAdjacentElement("afterend",e),t.parentNode.appendChild(e)):"before"===this.options.indicatorPosition&&t.insertAdjacentElement("beforebegin",e)}notify(t){if(t.hasAttribute("disabled"))return;const i=t.validity.valid,e=t.getAttribute("type"),s=i?null:this.getCustomMessage(t,t.type,t.validity);if(this.switchClasses(t,i),e&&"radio"===e){const e=t.name;this.elementsForValidation.forEach(s=>{(s.name&&s.name===e||s===t)&&this.switchClasses(s,i)})}if(this.options.indicator){if(s){t.setCustomValidity("");const i=t.parentNode.querySelector('[aria-live="polite"]');i&&(i.innerText=s)}}else s&&t.setCustomValidity(s),t.reportValidity()}formInvalidNotification(){this.form.dataset.invalidFormAlert&&window.Joomla&&"function"==typeof window.Joomla.renderMessages&&window.Joomla.renderMessages({Error:[this.form.dataset.invalidForm?this.form.dataset.invalidForm:"Please correct the invalid iputs"]})}}const r=Array.from(document.querySelectorAll("form:not([novalidate]"));window.Formally=n;return r.forEach(t=>{new n(t)}),t.Formally=n,t}({});
