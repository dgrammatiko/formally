var FormValidator=function(t){"use strict";const i=()=>{let t=()=>Math.floor(65536*(1+Math.random())).toString(16).substring(1);return t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()},s=()=>{let t=!1;try{const i={get passive(){t=!0}};window.addEventListener("test",null,i),window.removeEventListener("test",null,i)}catch(i){t=!1}return t},e={validClass:"is-valid",invalidClass:"is-invalid",indicator:!0,indicatorElement:"div",indicatorPosition:"after",indicatorClass:"invalid-feedback",attachChange:!1,attachInput:!1};class a{constructor(t){if(this.form=t,!t||"HTMLFormElement"!==t.constructor.name)throw new Error("Validator needs a form element");if(!this.form.hasAttribute("novalidate")){if(this.options=e,this.form.dataset)for(const t in this.form.dataset)this.options.hasOwnProperty(t)&&(this.options[t]="indicator"===t||"attachChange"===t||"attachInput"===t?"true"===this.form.dataset[t]:this.form.dataset[t]);this.passiveSupported=s(),this.elementsForValidation=[],this.formElementValidate=this.formElementValidate.bind(this),this.reAttachElement=this.reAttachElement.bind(this),this.init(),this.form.Formally=this}}formElementValidate(t){const i=t.target;i.FormallyCustomValidator&&"function"==typeof i.FormallyCustomValidator?i.customValidator():i.checkValidity(),this.notify(i)}getCustomMessage(t,i,s){var e=t.dataset;if("object"==typeof e){if(s.typeMismatch&&e[i+"Mismatch"])return e[i+"Mismatch"];for(var a in e)if(e.hasOwnProperty(a)&&s[a])return e[a]}}switchClasses(t,i){i?(t.classList.remove(this.options.invalidClass),t.classList.add(this.options.validClass)):(t.classList.remove(this.options.validClass),t.classList.add(this.options.invalidClass))}notify(t){}elementInit(t){}isValid(){return this.elementsForValidation.forEach(t=>{t.validity.valid?(t.classList.remove(this.options.validClass),t.classList.add(this.options.validClass)):(t.classList.add(this.options.validClass),t.classList.remove(this.options.validClass)),this.notify(t)}),!!this.form.checkValidity()}init(){[].slice.call(this.form.elements).forEach(t=>{const i=t.tagName;!i||"INPUT"!==i&&"SELECT"!==i&&"TEXTAREA"!==i||(this.elementsForValidation.push(t),t.addEventListener("blur",this.formElementValidate),this.passiveSupported,(this.options.attachChange||this.form.dataset.attachChange)&&t.addEventListener("change",this.formElementValidate,!!this.passiveSupported&&{passive:!0}),(this.options.attachInput||this.form.dataset.attachInput)&&t.addEventListener("change",this.formElementValidate,!!this.passiveSupported&&{passive:!0}),this.options.indicator&&this.form.dataset&&0!==Object.keys(this.form.dataset).length&&this.elementInit(t))})}reAttachElement(t){const i=t.tagName;t.removeEventListener("blur",this.formElementValidate,!!this.passiveSupported&&{passive:!0}),t.removeEventListener("change",this.formElementValidate,!!this.passiveSupported&&{passive:!0}),t.removeEventListener("input",this.formElementValidate,!!this.passiveSupported&&{passive:!0}),!i||"INPUT"!==i&&"SELECT"!==i&&"TEXTAREA"!==i||(t.addEventListener("blur",this.formElementValidate,!!this.passiveSupported&&{passive:!0}),(this.options.attachChange||this.form.dataset.attachChange)&&t.addEventListener("change",this.formElementValidate,!!this.passiveSupported&&{passive:!0}),(this.options.attachInput||this.form.dataset.attachInput)&&t.addEventListener("input",this.formElementValidate,!!this.passiveSupported&&{passive:!0}),this.options.indicator&&this.form.dataset&&0!==Object.keys(this.form.dataset).length&&this.elementInit(t))}}class o extends a{constructor(t){super(t)}elementInit(t){let s=t.closest("span");s||(s=document.createElement(this.options.indicatorElement)),s.setAttribute("aria-live","polite");const e=i();s.id=e,t.setAttribute("aria-controls",e),s.classList.add(this.options.indicatorClass),"after"===this.options.indicatorPosition?(t.insertAdjacentElement("afterend",s),t.parentNode.appendChild(s)):"before"===this.options.indicatorPosition&&t.insertAdjacentElement("beforebegin",s)}notify(t){const i=t.validity.valid,s=t.getAttribute("type"),e=i?null:this.getCustomMessage(t,t.type,t.validity);if(this.switchClasses(t,i),s&&"radio"===s){const s=t.name;this.elementsForValidation.forEach(e=>{(e.name&&e.name===s||e===t)&&this.switchClasses(e,i)})}if(this.options.indicator){if(e){t.setCustomValidity("");const i=t.parentNode.querySelector('[aria-live="polite"]');i&&(i.innerText=e)}}else e&&t.setCustomValidity(e),t.reportValidity()}}const n=Array.from(document.querySelectorAll("form:not([novalidate]"));window.Formally=o;return n.forEach(t=>{new o(t)}),t.Formally=o,t}({});
