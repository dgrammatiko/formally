var FormValidator=function(t){"use strict";const e=()=>{let t=()=>Math.floor(65536*(1+Math.random())).toString(16).substring(1);return t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()},i=()=>{let t=!1;try{const e={get passive(){return t=!0,!0}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){return t=!1,!1}return t},s=function(t,e){let i;return function(...s){i&&clearTimeout(i),i=setTimeout(()=>{e(...s),i=null},t)}},a={validClass:"is-valid",invalidClass:"is-invalid",indicator:!0,indicatorElement:"div",indicatorPosition:"after",indicatorClass:"invalid-feedback",attachChange:!1,attachInput:!1};class o{constructor(t){if(this.form=t,!t||"HTMLFormElement"!==t.constructor.name)throw new Error("Validator needs a form element");if(!this.form.hasAttribute("novalidate")){if(this.options=a,this.form.dataset)for(const t in this.form.dataset)Object.prototype.hasOwnProperty.call(this.options,t)&&(this.options[t]="indicator"===t||"attachChange"===t||"attachInput"===t?"true"===this.form.dataset[t]:this.form.dataset[t]);this.passiveSupported=i(),this.elementsForValidation=[],this.formElementValidate=this.formElementValidate.bind(this),this.reAttachElement=this.reAttachElement.bind(this),this.debounced=s(99,this.formElementValidate),this.init(),this.form.Formally=this}}formElementValidate(t){const e=t.target;e.FormallyCustomValidator&&"function"==typeof e.FormallyCustomValidator?e.customValidator():e.checkValidity(),this.notify(e)}getCustomMessage(t,e,i){var s=t.dataset;if("object"==typeof s){if(i.typeMismatch&&s[e+"Mismatch"])return s[e+"Mismatch"];for(var a in s)if(Object.prototype.hasOwnProperty.call(s,a)&&i[a])return s[a]}return""}switchClasses(t,e){e?(t.classList.remove(this.options.invalidClass),t.classList.add(this.options.validClass)):(t.classList.remove(this.options.validClass),t.classList.add(this.options.invalidClass))}notify(){}elementInit(){}isValid(){return this.elementsForValidation.forEach(t=>{t.validity.valid?(t.classList.remove(this.options.validClass),t.classList.add(this.options.validClass)):(t.classList.add(this.options.validClass),t.classList.remove(this.options.validClass)),this.notify(t)}),!!this.form.checkValidity()}init(){[].slice.call(this.form.elements).forEach(t=>{const e=t.tagName;!e||"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e||(this.elementsForValidation.push(t),t.addEventListener("blur",this.debounced),this.passiveSupported,t.addEventListener("change",this.debounced,!!this.passiveSupported&&{passive:!0}),t.addEventListener("change",this.debounced,!!this.passiveSupported&&{passive:!0}),this.options.indicator&&this.form.dataset&&0!==Object.keys(this.form.dataset).length&&this.elementInit(t))})}reAttachElement(t){const e=t.tagName;t.removeEventListener("blur",this.debounced,!!this.passiveSupported&&{passive:!0}),t.removeEventListener("change",this.debounced,!!this.passiveSupported&&{passive:!0}),t.removeEventListener("input",this.debounced,!!this.passiveSupported&&{passive:!0}),!e||"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e||(t.addEventListener("blur",this.debounced,!!this.passiveSupported&&{passive:!0}),t.addEventListener("change",this.debounced,!!this.passiveSupported&&{passive:!0}),t.addEventListener("input",this.debounced,!!this.passiveSupported&&{passive:!0}),this.options.indicator&&this.form.dataset&&0!==Object.keys(this.form.dataset).length&&this.elementInit(t))}}return t.Formally=class extends o{constructor(t){super(t)}elementInit(t){let i=t.closest("span");i||(i=document.createElement(this.options.indicatorElement)),i.setAttribute("aria-live","polite");const s=e();i.id=s,t.setAttribute("aria-controls",s),i.classList.add(this.options.indicatorClass),"after"===this.options.indicatorPosition?(t.insertAdjacentElement("afterend",i),t.parentNode.appendChild(i)):"before"===this.options.indicatorPosition&&t.insertAdjacentElement("beforebegin",i)}notify(t){const e=t.validity.valid,i=t.getAttribute("type"),s=e?null:this.getCustomMessage(t,t.type,t.validity);if(this.switchClasses(t,e),i&&"radio"===i){const i=t.name;this.elementsForValidation.forEach(s=>{(s.name&&s.name===i||s===t)&&this.switchClasses(s,e)})}if(this.options.indicator){if(s){t.setCustomValidity("");const e=t.parentNode.querySelector('[aria-live="polite"]');e&&(e.innerText=s)}}else s&&t.setCustomValidity(s),t.reportValidity()}},t}({});
