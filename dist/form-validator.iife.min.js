!function(){"use strict";function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=n.key,a=void 0,"symbol"==typeof(a=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"))?a:String(a)),n)}var r,a}var e="is-valid",i="is-invalid",n=!1,r=["badInput","patternMismatch","rangeOverflow","rangeUnderflow","stepMismatch","tooLong","tooShort","typeMismatch","valid","valueMissing"],a=function(){function a(t){var r=this;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),!t||"HTMLFormElement"!==t.constructor.name)throw new Error("Validator needs a form element");if(!t.hasAttribute("novalidate")){var o,s,l;this.form=t,this.elementsForValidation=[],this.validateFormElement=this.validateFormElement.bind(this),this.modifyElement=this.modifyElement.bind(this),this.debounced=(o=300,s=this.validateFormElement,function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];l&&clearTimeout(l),l=setTimeout((function(){s.apply(void 0,e),l=null}),o)}),this.switchClasses=this.switchClasses.bind(this),this.notify=this.notify.bind(this);var d=this.form.dataset;this.options={validClass:d.validClass?d.validClass:e,invalidClass:d.invalidClass?d.invalidClass:i,liveCheck:!(!d.liveCheck||"true"!==d.liveCheck)||n},Array.from(this.form.elements).forEach((function(t){return r.modifyElement(t,"add")}));this.observer=new MutationObserver((function(t,e){t.forEach((function(t){t.addedNodes.length>0&&Array.from(r.form.elements).filter((function(t){return!r.elementsForValidation.includes(t)})).forEach((function(t){return r.modifyElement(t,"add")})),t.removedNodes.length>0&&r.elementsForValidation.filter((function(t){return!Array.from(r.form.elements).includes(t)})).forEach((function(t){return r.modifyElement(t,"remove")}))}))})),this.observer.observe(this.form,{attributes:!1,childList:!0,subtree:!0})}}var o,s,l;return o=a,s=[{key:"validateFormElement",value:function(t){if(!t||!t.target||t.target.form!==this.form)throw new Error("The element needs to be a children of a form element");t.target.setCustomValidity(""),t.target.checkValidity(),this.notify(t.target,t.target.validity.valid)}},{key:"getCustomMessage",value:function(t,e){var i="";if(!t||!e)return i;var n=t.dataset;return n?(r.forEach((function(e){!0===t.validity[e]&&n[e]&&(i=n[e])})),i):i}},{key:"modifyElement",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"add";!t.hasAttribute("disabled")&&t.willValidate&&"FIELDSET"!==t.tagName&&"OUTPUT"!==t.tagName&&(this.elementsForValidation.push(t),t["".concat(e,"EventListener")]("blur",this.validateFormElement,{passive:!0}),t["".concat(e,"EventListener")]("change",this.validateFormElement,{passive:!0}),this.options.liveCheck&&t["".concat(e,"EventListener")]("input",this.debounced,{passive:!0}))}},{key:"dispose",value:function(){var t=this;Array.from(this.form.elements).forEach((function(e){return t.modifyElement(e,"remove")})),this.observer.disconnect(),this.observer=null}},{key:"switchClasses",value:function(t,e){e?(t.classList.remove(this.options.invalidClass),t.classList.add(this.options.validClass)):(t.classList.remove(this.options.validClass),t.classList.add(this.options.invalidClass))}},{key:"notify",value:function(t,e){var i=this;if(!t.hasAttribute("disabled")){var n=t.getAttribute("type");t.setCustomValidity(this.getCustomMessage(t,t.type)),this.switchClasses(t,e),n&&"radio"===n&&this.elementsForValidation.filter((function(e){return e.name!==t.name})).forEach((function(t){return i.switchClasses(t,e)})),t.reportValidity()}}},{key:"isValid",value:function(){var t,e=this;return this.elementsForValidation.forEach((function(i){i.setCustomValidity("");var n=i.checkValidity();e.notify(i,n),t||n||(t=i)})),!!this.form.checkValidity()||(t&&t.focus(),!1)}}],s&&t(o.prototype,s),l&&t(o,l),Object.defineProperty(o,"prototype",{writable:!1}),a}();window.Formally=window.Formally||new WeakMap,document.querySelectorAll("form.validate:not([novalidate]").forEach((function(t){return window.Formally.set(t,new a(t))}))}();
