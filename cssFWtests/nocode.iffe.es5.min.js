var FormValidator=function(t){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function n(t,e,i){return e&&a(t.prototype,e),i&&a(t,i),t}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function r(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}var l=function(){var t=!1;try{var e={get passive(){t=!0}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){t=!1}return t},c={validClass:"is-valid",invalidClass:"is-invalid",indicator:!0,indicatorElement:"div",indicatorPosition:"after",indicatorClass:"invalid-feedback",attachChange:!1,attachInput:!1},d=function(t){function e(t){return i(this,e),r(this,o(e).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,t),n(e,[{key:"elementInit",value:function(t){var e=t.closest("span");e||(e=document.createElement(this.options.indicatorElement)),e.setAttribute("aria-live","polite");var i,a=(i=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)})()+"-"+i()+"-"+i()+"-"+i()+"-"+i()+i();e.id=a,t.setAttribute("aria-controls",a),e.classList.add(this.options.indicatorClass),"after"===this.options.indicatorPosition?(t.insertAdjacentElement("afterend",e),t.parentNode.appendChild(e)):"before"===this.options.indicatorPosition&&t.insertAdjacentElement("beforebegin",e)}},{key:"notify",value:function(t){var e=this,i=t.validity.valid,a=t.getAttribute("type"),n=i?null:this.getCustomMessage(t,t.type,t.validity);if(this.switchClasses(t,i),a&&"radio"===a){var o=t.name;this.elementsForValidation.forEach((function(a){(a.name&&a.name===o||a===t)&&e.switchClasses(a,i)}))}if(this.options.indicator){if(n){t.setCustomValidity("");var s=t.parentNode.querySelector('[aria-live="polite"]');s&&(s.innerText=n)}}else n&&t.setCustomValidity(n),t.reportValidity()}}]),e}(function(){function t(e){if(i(this,t),this.form=e,!e||"HTMLFormElement"!==e.constructor.name)throw new Error("Validator needs a form element");if(!this.form.hasAttribute("novalidate")){if(this.options=c,this.form.dataset)for(var a in this.form.dataset)this.options.hasOwnProperty(a)&&(this.options[a]="indicator"===a||"attachChange"===a||"attachInput"===a?"true"===this.form.dataset[a]:this.form.dataset[a]);this.passiveSupported=l(),this.elementsForValidation=[],this.formElementValidate=this.formElementValidate.bind(this),this.reAttachElement=this.reAttachElement.bind(this),this.init(),this.form.Formally=this}}return n(t,[{key:"formElementValidate",value:function(t){var e=t.target;e.FormallyCustomValidator&&"function"==typeof e.FormallyCustomValidator?e.customValidator():e.checkValidity(),this.notify(e)}},{key:"getCustomMessage",value:function(t,i,a){var n=t.dataset;if("object"===e(n)){if(a.typeMismatch&&n[i+"Mismatch"])return n[i+"Mismatch"];for(var o in n)if(n.hasOwnProperty(o)&&a[o])return n[o]}}},{key:"switchClasses",value:function(t,e){e?(t.classList.remove(this.options.invalidClass),t.classList.add(this.options.validClass)):(t.classList.remove(this.options.validClass),t.classList.add(this.options.invalidClass))}},{key:"notify",value:function(t){}},{key:"elementInit",value:function(t){}},{key:"isValid",value:function(){var t=this;return this.elementsForValidation.forEach((function(e){e.validity.valid?(e.classList.remove(t.options.validClass),e.classList.add(t.options.validClass)):(e.classList.add(t.options.validClass),e.classList.remove(t.options.validClass)),t.notify(e)})),!!this.form.checkValidity()}},{key:"init",value:function(){var t=this;[].slice.call(this.form.elements).forEach((function(e){var i=e.tagName;!i||"INPUT"!==i&&"SELECT"!==i&&"TEXTAREA"!==i||(t.elementsForValidation.push(e),e.addEventListener("blur",t.formElementValidate),t.passiveSupported,(t.options.attachChange||t.form.dataset.attachChange)&&e.addEventListener("change",t.formElementValidate,!!t.passiveSupported&&{passive:!0}),(t.options.attachInput||t.form.dataset.attachInput)&&e.addEventListener("change",t.formElementValidate,!!t.passiveSupported&&{passive:!0}),t.options.indicator&&t.form.dataset&&0!==Object.keys(t.form.dataset).length&&t.elementInit(e))}))}},{key:"reAttachElement",value:function(t){var e=t.tagName;t.removeEventListener("blur",this.formElementValidate,!!this.passiveSupported&&{passive:!0}),t.removeEventListener("change",this.formElementValidate,!!this.passiveSupported&&{passive:!0}),t.removeEventListener("input",this.formElementValidate,!!this.passiveSupported&&{passive:!0}),!e||"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e||(t.addEventListener("blur",this.formElementValidate,!!this.passiveSupported&&{passive:!0}),(this.options.attachChange||this.form.dataset.attachChange)&&t.addEventListener("change",this.formElementValidate,!!this.passiveSupported&&{passive:!0}),(this.options.attachInput||this.form.dataset.attachInput)&&t.addEventListener("input",this.formElementValidate,!!this.passiveSupported&&{passive:!0}),this.options.indicator&&this.form.dataset&&0!==Object.keys(this.form.dataset).length&&this.elementInit(t))}}]),t}()),u=Array.from(document.querySelectorAll("form:not([novalidate]"));window.Formally=d;return u.forEach((function(t){new d(t)})),t.Formally=d,t}({});
