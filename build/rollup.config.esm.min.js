import { terser } from 'rollup-plugin-terser';
import gzipPlugin from 'rollup-plugin-gzip';
import { compress } from 'brotli';
import { gzip } from 'node-zopfli';

export default {
  input: 'src/index.js',
  output: {
    sourcemap: false,
    format: 'esm',
    file: 'dist/formally.esm.min.js'
  },
  plugins: [
    gzipPlugin({
      customCompression: content => gzip(Buffer.from(content)),
    }),
    gzipPlugin({
      customCompression: content => compress(Buffer.from(content)),
      fileName: '.br',
    }),
    terser()
  ]
};