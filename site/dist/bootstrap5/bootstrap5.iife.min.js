var FormValidator=function(t){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?s(t):e}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=r(t);if(e){var o=r(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return l(this,i)}}var u={validClass:"is-valid",invalidClass:"is-invalid",indicator:!0,indicatorElement:"span",indicatorPosition:"after",indicatorClass:"invalid-feedback",invalidForm:"Form is not valid!",invalidFormAlert:!1},f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(n,t);var e=c(n);function n(t){var o;return i(this,n),(o=e.call(this,t)).switchClasses=o.switchClasses.bind(s(o)),o.elementInit=o.elementInit.bind(s(o)),o.notify=o.notify.bind(s(o)),o.invalidFormNotification=o.invalidFormNotification.bind(s(o)),o}return o(n,[{key:"switchClasses",value:function(t,e){e?(t.classList.remove(this.options.invalidClass),t.classList.add(this.options.validClass)):(t.classList.remove(this.options.validClass),t.classList.add(this.options.invalidClass))}},{key:"elementInit",value:function(t){if(!t.hasAttribute("disabled")){var e=t.closest("".concat(this.options.indicatorElement,"[aria-live]"));e||(e=document.createElement(this.options.indicatorElement)),e.setAttribute("aria-live","polite");var i,n=(i=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)})()+i()+"-"+i()+i();e.id=n,t.setAttribute("aria-controls",n),e.classList.add(this.options.indicatorClass),"after"===this.options.indicatorPosition?(t.insertAdjacentElement("afterend",e),t.parentNode.appendChild(e)):"before"===this.options.indicatorPosition&&t.insertAdjacentElement("beforebegin",e)}}},{key:"notify",value:function(t,e){var i=this;if(!t.hasAttribute("disabled")){var n=t.getAttribute("type"),o=e?null:this.getCustomMessage(t,t.type,t.validity);if(this.switchClasses(t,e),n&&"radio"===n)this.elementsForValidation.filter((function(e){return e.name!==t.name})).forEach((function(t){i.switchClasses(t,e)}));if(this.form.dataset&&0!==Object.keys(this.form.dataset).length&&"true"===this.form.dataset.indicator){if(o){t.setCustomValidity("");var r=t.parentNode.querySelector('[aria-live="polite"]');r&&(r.innerText=o)}}else document.activeElement===t&&t.reportValidity()}}},{key:"isValid",value:function(){var t,e=this;return this.elementsForValidation.forEach((function(i){var n=i.checkValidity();e.notify&&"function"==typeof e.notify&&e.notify(i,n),t instanceof HTMLElement||n||(t=i)})),!!this.form.checkValidity()||(this.invalidFormNotification&&"function"==typeof this.invalidFormNotification&&this.invalidFormNotification(),"string"!=typeof t&&t.focus(),!1)}},{key:"invalidFormNotification",value:function(){}}]),n}(function(){function t(e){var n=this;if(i(this,t),!e||"HTMLFormElement"!==e.constructor.name)throw new Error("Validator needs a form element");if(this.form=e,!this.form.hasAttribute("novalidate")){var o,r,a;if(this.passiveSupported=function(){var t=!1;try{var e={get passive(){return t=!0,!0}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){return t=!1,!1}return t}(),this.elementsForValidation=[],this.validateFormElement=this.validateFormElement.bind(this),this.attachElement=this.attachElement.bind(this),this.debounced=(o=2e3,r=this.validateFormElement,function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];a&&clearTimeout(a),a=setTimeout((function(){r.apply(void 0,e),a=null}),o)}),this.options=u,this.form.dataset)for(var s in this.form.dataset)Object.prototype.hasOwnProperty.call(this.options,s)&&(this.options[s]="indicator"===s||"invalidFormAlert"===s?"true"===this.form.dataset[s]:this.form.dataset[s]);[].slice.call(this.form.elements).forEach((function(t){t.hasAttribute("disabled")||"FIELDSET"===t.tagName||(n.elementsForValidation.push(t),t.addEventListener("blur",n.validateFormElement,!n.passiveSupported||{passive:!0}),t.addEventListener("change",n.validateFormElement,!n.passiveSupported||{passive:!0}),t.addEventListener("input",n.debounced,!n.passiveSupported||{passive:!0}),n.options.indicator&&n.elementInit&&"function"==typeof n.elementInit&&n.elementInit(t))}))}}return o(t,[{key:"validateFormElement",value:function(t){var e=null;if(!t||!t.target||t.target.form!==this.form)throw new Error("The element needs to be a children of a form element");(e=t.target).checkValidity(),this.notify&&"function"==typeof this.notify&&this.notify(e,e.validity.valid)}},{key:"getCustomMessage",value:function(t,i,n){if(!t||!i||!n)return null;var o=t.dataset;if("object"===e(o)){if(n.typeMismatch&&o["".concat(i,"Mismatch")])return o["".concat(i,"Mismatch")];for(var r in o)if(Object.prototype.hasOwnProperty.call(o,r)&&!0===n[r])return o[r]}return null}},{key:"attachElement",value:function(t){!t.hasAttribute("disabled")&&t.willValidate&&(t.removeEventListener("blur",this.validateFormElement,!this.passiveSupported||{passive:!0}),t.removeEventListener("change",this.validateFormElement,!this.passiveSupported||{passive:!0}),t.removeEventListener("input",this.debounced,!this.passiveSupported||{passive:!0}),t.addEventListener("blur",this.validateFormElement,!this.passiveSupported||{passive:!0}),t.addEventListener("change",this.validateFormElement,!this.passiveSupported||{passive:!0}),t.addEventListener("input",this.debounced,!this.passiveSupported||{passive:!0}),this.options.indicator&&this.elementInit&&"function"==typeof this.elementInit&&this.elementInit(t))}}]),t}());return t.Formally=f,t}({});
