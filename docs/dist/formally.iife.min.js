var FormValidator=function(t){"use strict";function e(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(n=r.key,a=void 0,"symbol"==typeof(a=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n,"string"))?a:String(a)),r)}var n,a}var i="is-valid",r="is-invalid",n=!1,a=["badInput","patternMismatch","rangeOverflow","rangeUnderflow","stepMismatch","tooLong","tooShort","typeMismatch","valid","valueMissing"],s=function(){function t(e){var a=this;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e||"HTMLFormElement"!==e.constructor.name)throw new Error("Validator needs a form element");if(!e.hasAttribute("novalidate")){var s,o,l;this.form=e,this.elementsForValidation=[],this.validateFormElement=this.validateFormElement.bind(this),this.modifyElement=this.modifyElement.bind(this),this.debounced=(s=300,o=this.validateFormElement,function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];l&&clearTimeout(l),l=setTimeout((function(){o.apply(void 0,e),l=null}),s)}),this.switchClasses=this.switchClasses.bind(this),this.notify=this.notify.bind(this);var d=this.form.dataset;this.options={validClass:d.validClass?d.validClass:i,invalidClass:d.invalidClass?d.invalidClass:r,liveCheck:!(!d.liveCheck||"true"!==d.liveCheck)||n},Array.from(this.form.elements).forEach((function(t){return a.modifyElement(t,"add")}));this.observer=new MutationObserver((function(t,e){t.forEach((function(t){t.addedNodes.length>0&&Array.from(a.form.elements).filter((function(t){return!a.elementsForValidation.includes(t)})).forEach((function(t){return a.modifyElement(t,"add")})),t.removedNodes.length>0&&a.elementsForValidation.filter((function(t){return!Array.from(a.form.elements).includes(t)})).forEach((function(t){return a.modifyElement(t,"remove")}))}))})),this.observer.observe(this.form,{attributes:!1,childList:!0,subtree:!0})}}var s,o,l;return s=t,o=[{key:"validateFormElement",value:function(t){if(!t||!t.target||t.target.form!==this.form)throw new Error("The element needs to be a children of a form element");t.target.setCustomValidity(""),t.target.checkValidity(),this.notify(t.target,t.target.validity.valid)}},{key:"getCustomMessage",value:function(t,e){var i="";if(!t||!e)return i;var r=t.dataset;return r?(a.forEach((function(e){!0===t.validity[e]&&r[e]&&(i=r[e])})),i):i}},{key:"modifyElement",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"add";!t.hasAttribute("disabled")&&t.willValidate&&"FIELDSET"!==t.tagName&&"OUTPUT"!==t.tagName&&(this.elementsForValidation.push(t),t["".concat(e,"EventListener")]("blur",this.validateFormElement,{passive:!0}),t["".concat(e,"EventListener")]("change",this.validateFormElement,{passive:!0}),this.options.liveCheck&&t["".concat(e,"EventListener")]("input",this.debounced,{passive:!0}))}},{key:"dispose",value:function(){var t=this;Array.from(this.form.elements).forEach((function(e){return t.modifyElement(e,"remove")})),this.observer.disconnect(),this.observer=null}},{key:"switchClasses",value:function(t,e){e?(t.classList.remove(this.options.invalidClass),t.classList.add(this.options.validClass)):(t.classList.remove(this.options.validClass),t.classList.add(this.options.invalidClass))}},{key:"notify",value:function(t,e){var i=this;if(!t.hasAttribute("disabled")){var r=t.getAttribute("type");t.setCustomValidity(this.getCustomMessage(t,t.type)),this.switchClasses(t,e),r&&"radio"===r&&this.elementsForValidation.filter((function(e){return e.name!==t.name})).forEach((function(t){return i.switchClasses(t,e)})),t.reportValidity()}}},{key:"isValid",value:function(){var t,e=this;return this.elementsForValidation.forEach((function(i){i.setCustomValidity("");var r=i.checkValidity();e.notify(i,r),t||r||(t=i)})),!!this.form.checkValidity()||(t&&t.focus(),!1)}}],o&&e(s.prototype,o),l&&e(s,l),Object.defineProperty(s,"prototype",{writable:!1}),t}();return t.Formally=s,Object.defineProperty(t,"__esModule",{value:!0}),t}({});
